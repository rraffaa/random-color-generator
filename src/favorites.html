<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Favorite Color Palettes</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
      background-color: #f4f4f4;
    }

    h1 {
      font-size: 2rem;
      color: #000000;
    }

    .description {
      text-align: justify;
      font-size: 1.1rem;
      color: #333;
      margin: 19px auto;
      max-width: 80%;
    }

    .button-container {
      display: flex;
      justify-content: center;
      margin: 45px 0; 
    }

    .button-container button,
    .button-container a {
      background-color: hsl(0, 38%, 28%);
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 0.9rem;
      cursor: pointer;
      margin: 0 10px; 
      text-decoration: none;
    }

    .button-container button:hover,
    .button-container a:hover {
      background-color: hsl(0, 38%, 28%);
    }

    .paleta {
      border: 1px solid #ddd;
      padding: 10px;
      margin: 10px;
      border-radius: 5px;
      display: inline-block;
      vertical-align: top;
      position: relative;
      min-height: 80px; 
      max-width: 250px; 
      overflow: hidden;
    }

    .paleta span {
      display: block;
      margin: 5px 0;
    }

    .favorite-btn {
      border: none;
      background: none;
      cursor: pointer;
      font-size: 1.5rem;
      color: #333;
    }

    .favorite-btn .heart-outline {
      color: #333;
    }

    .favorite-btn .heart-filled {
      color: red;
    }

    .folder-btn {
      border: none;
      background-color: #007BFF;
      color: white;
      padding: 10px 20px;
      font-size: 1rem;
      cursor: pointer;
      margin: 5px;
      display: inline-block;
    }

    .folder-btn:hover {
      background-color: #0056b3;
    }

    .folder-name-input {
      display: inline-block;
      margin: 10px;
      position: absolute;
      top: 370px; 
      left: 50%; 
      transform: translateX(-50%); 
    }

    .folder-name-input input {
      padding: 5px;
      font-size: 1rem;
    }

    .folder-name-input button {
      padding: 5px 10px;
      font-size: 1rem;
    }

    .edit-folder-btn {
      background-color: #FFD700;
      color: white;
      border: none;
      padding: 5px 10px;
      font-size: 1rem;
      cursor: pointer;
      margin: 5px;
    }

    .edit-folder-btn:hover {
      background-color: #FFC107;
    }

    .folder-menu {
      display: none;
      position: absolute;
      background-color: white;
      border: 1px solid #ddd;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
      z-index: 1000;
      top: 0;
      left: 0;
    }

    .folder-menu button {
      border: none;
      background-color: transparent;
      color: #333;
      padding: 10px;
      cursor: pointer;
      text-align: left;
      width: 100%;
    }

    .folder-menu button:hover {
      background-color: #f4f4f4;
    }

    .add-color-btn {
      border: none;
      background-color: #117228;
      color: white;
      padding: 10px 20px;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 10px;
      display: inline-block;
    }

    .add-color-btn:hover {
      background-color: #116d25;
    }

    .color-input {
      display: none;
      margin-top: 10px;
    }

    .color-input input {
      padding: 5px;
      font-size: 1rem;
    }

    .folder {
      display: inline-block;
      width: 250px;
      margin: 10px;
      vertical-align: top;
      text-align: left;
      background-color: #f9f9f9;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      position: relative;
    }

    .folder-name {
      font-weight: bold;
      font-size: 1.2rem;
      margin-bottom: 10px;
    }

    .folder .color-container {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
    }

    .color-box {
      width: 30px;
      height: 30px;
      border-radius: 5px;
    }

    .edit-folder-btn-container {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
  </style>
</head>
<body>
  <h1>Favorite Color Palettes</h1>
  <p class="description">This is a space where you can create and manage your favorite color palettes.
    Store colors that you like or that you’ve encountered in your projects, and easily access them for
     future reuse. You can add colors to your collection by simply copying and saving their color codes. 
     Additionally, you can create custom palettes by selecting colors from your favorites and organizing them
      into named collections. This feature allows you to keep your color selections organized and accessible 
      for future design projects, ensuring efficiency and inspiration when working on new creative endeavors.</p>
  <div class="button-container">
    <a href="index.html">Back to Generator</a>
    <button onclick="clearFavorites()">Clear Favorites</button>
    <button onclick="newFolder()">New Palette Folder</button>
  </div>

  <div id="favoritesContainer"></div>
  <div id="foldersContainer"></div>

  <div id="folderNameInput" class="folder-name-input" style="display: none;">
    <input type="text" id="folderName" placeholder="Enter new folder name">
    <button onclick="createFolder()">Create</button>
  </div>

  <script>
    const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
    const folders = JSON.parse(localStorage.getItem('folders')) || [];

    // Update the UI with the favorite colors
    function updateFavorites() {
      const container = document.getElementById('favoritesContainer');
      container.innerHTML = '';
      favorites.slice(0, 60).forEach((color, index) => {
        const palette = document.createElement('div');
        palette.className = 'paleta';
        palette.style.backgroundColor = color;

        const colorCode = document.createElement('span');
        colorCode.textContent = color;

        const favoriteBtn = document.createElement('button');
        favoriteBtn.className = 'favorite-btn';
        favoriteBtn.innerHTML = '<span class="heart-filled">♥</span>';
        favoriteBtn.onclick = () => copyColorCode(color);

        palette.appendChild(colorCode);
        palette.appendChild(favoriteBtn);
        container.appendChild(palette);
      });

      if (favorites.length > 60) {
        const loadMoreButton = document.createElement('button');
        loadMoreButton.textContent = 'Load more';
        loadMoreButton.onclick = () => loadMoreFavorites(container);
        container.appendChild(loadMoreButton);
      }
    }

    // Copy color code to clipboard
    function copyColorCode(color) {
      navigator.clipboard.writeText(color).then(() => {
        alert('Color code copied to clipboard!');
      });
    }

    // Load more favorites (in chunks of 20)
    function loadMoreFavorites(container) {
      const start = favorites.length;
      const end = Math.min(favorites.length + 20, favorites.length);
      favorites.slice(start, end).forEach(color => {
        const palette = document.createElement('div');
        palette.className = 'paleta';
        palette.style.backgroundColor = color;

        const colorCode = document.createElement('span');
        colorCode.textContent = color;

        const favoriteBtn = document.createElement('button');
        favoriteBtn.className = 'favorite-btn';
        favoriteBtn.innerHTML = '<span class="heart-filled">♥</span>';
        favoriteBtn.onclick = () => copyColorCode(color);

        palette.appendChild(colorCode);
        palette.appendChild(favoriteBtn);
        container.appendChild(palette);
      });

      if (favorites.length > end) {
        const loadMoreButton = document.createElement('button');
        loadMoreButton.textContent = 'Load more';
        loadMoreButton.onclick = () => loadMoreFavorites(container);
        container.appendChild(loadMoreButton);
      }
    }

    // Handle the folder creation process
    function newFolder() {
      document.getElementById('folderNameInput').style.display = 'block';
    }

    function createFolder() {
      const folderName = document.getElementById('folderName').value.trim();
      if (folderName) {
        const newFolder = {
          name: folderName,
          colors: []
        };
        folders.push(newFolder);
        localStorage.setItem('folders', JSON.stringify(folders));
        updateFolders();
        document.getElementById('folderName').value = '';
        document.getElementById('folderNameInput').style.display = 'none';
      }
    }

    // Update the UI with the folders
    function updateFolders() {
      const container = document.getElementById('foldersContainer');
      container.innerHTML = '';
      folders.forEach((folder, index) => {
        const folderElement = document.createElement('div');
        folderElement.className = 'folder';

        const folderName = document.createElement('div');
        folderName.className = 'folder-name';
        folderName.textContent = folder.name;

        const colorContainer = document.createElement('div');
        colorContainer.className = 'color-container';

        folder.colors.forEach(color => {
          const colorBox = document.createElement('div');
          colorBox.className = 'color-box';
          colorBox.style.backgroundColor = color;
          colorContainer.appendChild(colorBox);
        });

        const addColorButton = document.createElement('button');
        addColorButton.className = 'add-color-btn';
        addColorButton.textContent = 'Add Color';
        addColorButton.onclick = () => addColorToFolder(index);

        const folderMenu = document.createElement('div');
        folderMenu.className = 'folder-menu';
        
        const editNameBtn = document.createElement('button');
        editNameBtn.textContent = 'Edit Name';
        editNameBtn.onclick = () => editFolderName(index);
        
        const deleteBtn = document.createElement('button');
        deleteBtn.textContent = 'Delete Folder';
        deleteBtn.onclick = () => deleteFolder(index);
        
        folderMenu.appendChild(editNameBtn);
        folderMenu.appendChild(deleteBtn);

        const editFolderBtn = document.createElement('button');
        editFolderBtn.className = 'edit-folder-btn';
        editFolderBtn.textContent = '⚙️';
        editFolderBtn.onclick = (event) => {
        event.stopPropagation();
        folderMenu.style.display = folderMenu.style.display === 'block' ? 'none' : 'block';
        };

    
        folderElement.appendChild(folderName);
        folderElement.appendChild(colorContainer);
        folderElement.appendChild(addColorButton);
        folderElement.appendChild(editFolderBtn);
        folderElement.appendChild(folderMenu);
        container.appendChild(folderElement);
      });
    }

    //Show temporary message
    function showMessage(message) {
    const messageContainer = document.createElement('div');
        messageContainer.textContent = message;
        messageContainer.style.position = 'fixed';
        messageContainer.style.bottom = '10px';
        messageContainer.style.right = '10px';
         messageContainer.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
        messageContainer.style.color = 'white';
        messageContainer.style.padding = '10px';
        messageContainer.style.borderRadius = '5px';
        messageContainer.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.3)';
    document.body.appendChild(messageContainer);

    setTimeout(() => {
        document.body.removeChild(messageContainer);
        }, 2500);
    }

    // Update copyColorCode function
    function copyColorCode(color) {
    navigator.clipboard.writeText(color).then(() => {
        showMessage('Color code copied to clipboard!');
    });
    }


    // Add color to folder
    function addColorToFolder(folderIndex) {
      const color = prompt('Enter color code (e.g., #ff0000):');
      if (color) {
        folders[folderIndex].colors.push(color);
        localStorage.setItem('folders', JSON.stringify(folders));
        updateFolders();
      }
    }

    // Edit folder name
    function editFolderName(index) {
      const newName = prompt('Enter new folder name:', folders[index].name);
      if (newName) {
        folders[index].name = newName;
        localStorage.setItem('folders', JSON.stringify(folders));
        updateFolders();
      }
    }

    // Delete folder
    function deleteFolder(index) {
      if (confirm('Are you sure you want to delete this folder?')) {
        folders.splice(index, 1);
        localStorage.setItem('folders', JSON.stringify(folders));
        updateFolders();
      }
    }

    // Clear all favorites
    function clearFavorites() {
      localStorage.removeItem('favorites');
      favorites.length = 0;
      updateFavorites();
    }

    updateFavorites();
    updateFolders();

    // Detect click events outside of the 'menu area'
document.addEventListener('click', (event) => {
  const menus = document.querySelectorAll('.folder-menu');
  menus.forEach(menu => {
    if (!menu.contains(event.target) && !menu.previousSibling.contains(event.target)) {
      menu.style.display = 'none';
    }
  });
});

  </script>
</body>
</html>